(function(h,g){"function"===typeof define&&define.amd?define(g):"object"===typeof exports?module.exports=g():h.returnExports=g()})(this,function(){var h=Array,g=h.prototype,m=Object,d=m.prototype,r=Function.prototype,w=String,q=w.prototype,y=Number,v=y.prototype,u=g.slice,t=g.splice,B=g.push,a=g.unshift,e=g.concat,b=r.call,n=Math.max,f=Math.min,p=d.toString,c="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag,l,S=Function.prototype.toString;l=function(a){if("function"!==typeof a)return!1;
  if(c){var A;try{S.call(a),A=!0}catch(P){A=!1}return A}a=p.call(a);return"[object Function]"===a||"[object GeneratorFunction]"===a};var L,M=RegExp.prototype.exec;L=function(a){if("object"!==typeof a)return!1;var A;if(c)try{M.call(a),A=!0}catch(P){A=!1}else A="[object RegExp]"===p.call(a);return A};var E,Q=String.prototype.valueOf;E=function(a){if("string"===typeof a)return!0;if("object"!==typeof a)return!1;var A;if(c)try{Q.call(a),A=!0}catch(P){A=!1}else A="[object String]"===p.call(a);return A};var x=
  function(a){var c;c=m.defineProperty&&function(){try{var a={};m.defineProperty(a,"x",{enumerable:!1,value:a});for(var c in a)return!1;return a.x===a}catch(A){return!1}}()?function(a,c,A,k){!k&&c in a||m.defineProperty(a,c,{configurable:!0,enumerable:!1,writable:!0,value:A})}:function(a,c,A,k){!k&&c in a||(a[c]=A)};return function(k,b,f){for(var l in b)a.call(b,l)&&c(k,l,b[l],f)}}(d.hasOwnProperty),N=function(a){var c=typeof a;return null===a||"object"!==c&&"function"!==c},C={ToInteger:function(a){a=
  +a;a!==a?a=0:0!==a&&a!==1/0&&a!==-(1/0)&&(a=(0<a||-1)*Math.floor(Math.abs(a)));return a},ToPrimitive:function(a){var c;if(N(a))return a;c=a.valueOf;if(l(c)&&(c=c.call(a),N(c)))return c;c=a.toString;if(l(c)&&(c=c.call(a),N(c)))return c;throw new TypeError;},ToObject:function(a){if(null==a)throw new TypeError("can't convert "+a+" to object");return m(a)},ToUint32:function(a){return a>>>0}},K=function(){};x(r,{bind:function(a){var c=this;if(!l(c))throw new TypeError("Function.prototype.bind called on incompatible "+
  c);for(var k=u.call(arguments,1),b,f=n(0,c.length-k.length),p=[],d=0;d<f;d++)B.call(p,"$"+d);b=Function("binder","return function ("+p.join(",")+"){ return binder.apply(this, arguments); }")(function(){if(this instanceof b){var f=c.apply(this,e.call(k,u.call(arguments)));return m(f)===f?f:this}return c.apply(a,e.call(k,u.call(arguments)))});c.prototype&&(K.prototype=c.prototype,b.prototype=new K,K.prototype=null);return b}});var G=b.bind(d.hasOwnProperty),R=b.bind(d.toString),F=b.bind(q.slice),D=
  b.bind(q.split),O=h.isArray||function(a){return"[object Array]"===R(a)},d=1!==[].unshift(0);x(g,{unshift:function(){a.apply(this,arguments);return this.length}},d);x(h,{isArray:O});var d=m("a"),H="a"!==d[0]||!(0 in d),d=function(a){var c=!0,k=!0;a&&(a.call("foo",function(a,k,P){"object"!==typeof P&&(c=!1)}),a.call([1],function(){k="string"===typeof this},"x"));return!!a&&c&&k};x(g,{forEach:function(a){var c=C.ToObject(this),k=H&&E(this)?D(this,""):c,b=-1,f=k.length>>>0,e;1<arguments.length&&(e=arguments[1]);
  if(!l(a))throw new TypeError("Array.prototype.forEach callback must be a function");for(;++b<f;)b in k&&("undefined"!==typeof e?a.call(e,k[b],b,c):a(k[b],b,c))}},!d(g.forEach));x(g,{map:function(a){var c=C.ToObject(this),k=H&&E(this)?D(this,""):c,b=k.length>>>0,f=h(b),e;1<arguments.length&&(e=arguments[1]);if(!l(a))throw new TypeError("Array.prototype.map callback must be a function");for(var p=0;p<b;p++)p in k&&(f[p]="undefined"!==typeof e?a.call(e,k[p],p,c):a(k[p],p,c));return f}},!d(g.map));x(g,
  {filter:function(a){var c=C.ToObject(this),k=H&&E(this)?D(this,""):c,b=k.length>>>0,f=[],e,p;1<arguments.length&&(p=arguments[1]);if(!l(a))throw new TypeError("Array.prototype.filter callback must be a function");for(var d=0;d<b;d++)d in k&&(e=k[d],("undefined"===typeof p?a(e,d,c):a.call(p,e,d,c))&&B.call(f,e));return f}},!d(g.filter));x(g,{every:function(a){var c=C.ToObject(this),k=H&&E(this)?D(this,""):c,b=k.length>>>0,f;1<arguments.length&&(f=arguments[1]);if(!l(a))throw new TypeError("Array.prototype.every callback must be a function");
  for(var e=0;e<b;e++)if(e in k&&("undefined"===typeof f?!a(k[e],e,c):!a.call(f,k[e],e,c)))return!1;return!0}},!d(g.every));x(g,{some:function(a){var c=C.ToObject(this),k=H&&E(this)?D(this,""):c,b=k.length>>>0,f;1<arguments.length&&(f=arguments[1]);if(!l(a))throw new TypeError("Array.prototype.some callback must be a function");for(var e=0;e<b;e++)if(e in k&&("undefined"===typeof f?a(k[e],e,c):a.call(f,k[e],e,c)))return!0;return!1}},!d(g.some));d=!1;g.reduce&&(d="object"===typeof g.reduce.call("es5",
    function(a,c,k,b){return b}));x(g,{reduce:function(a){var c=C.ToObject(this),k=H&&E(this)?D(this,""):c,b=k.length>>>0;if(!l(a))throw new TypeError("Array.prototype.reduce callback must be a function");if(0===b&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var f=0,e;if(2<=arguments.length)e=arguments[1];else{do{if(f in k){e=k[f++];break}if(++f>=b)throw new TypeError("reduce of empty array with no initial value");}while(1)}for(;f<b;f++)f in k&&(e=a(e,k[f],
  f,c));return e}},!d);d=!1;g.reduceRight&&(d="object"===typeof g.reduceRight.call("es5",function(a,c,k,b){return b}));x(g,{reduceRight:function(a){var c=C.ToObject(this),k=H&&E(this)?D(this,""):c,b=k.length>>>0;if(!l(a))throw new TypeError("Array.prototype.reduceRight callback must be a function");if(0===b&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var f,b=b-1;if(2<=arguments.length)f=arguments[1];else{do{if(b in k){f=k[b--];break}if(0>--b)throw new TypeError("reduceRight of empty array with no initial value");
}while(1)}if(0>b)return f;do b in k&&(f=a(f,k[b],b,c));while(b--);return f}},!d);d=g.indexOf&&-1!==[0,1].indexOf(1,2);x(g,{indexOf:function(a){var c=H&&E(this)?D(this,""):C.ToObject(this),k=c.length>>>0;if(0===k)return-1;var b=0;1<arguments.length&&(b=C.ToInteger(arguments[1]));for(b=0<=b?b:n(0,k+b);b<k;b++)if(b in c&&c[b]===a)return b;return-1}},d);d=g.lastIndexOf&&-1!==[0,1].lastIndexOf(0,-3);x(g,{lastIndexOf:function(a){var c=H&&E(this)?D(this,""):C.ToObject(this),k=c.length>>>0;if(0===k)return-1;
  var b=k-1;1<arguments.length&&(b=f(b,C.ToInteger(arguments[1])));for(b=0<=b?b:k-Math.abs(b);0<=b;b--)if(b in c&&a===c[b])return b;return-1}},d);d=function(){var a=[1,2],c=a.splice();return 2===a.length&&O(c)&&0===c.length}();x(g,{splice:function(a,c){return 0===arguments.length?[]:t.apply(this,arguments)}},!d);d=function(){var a={};g.splice.call(a,0,0,1);return 1===a.length}();x(g,{splice:function(a,c){if(0===arguments.length)return[];var k=arguments;this.length=n(C.ToInteger(this.length),0);0<arguments.length&&
"number"!==typeof c&&(k=u.call(arguments),2>k.length?B.call(k,this.length-a):k[1]=C.ToInteger(c));return t.apply(this,k)}},!d);d=function(){var a=new h(1E5);a[8]="x";a.splice(1,1);return 7===a.indexOf("x")}();r=function(){var a=[];a[256]="a";a.splice(257,0,"b");return"a"===a[256]}();x(g,{splice:function(a,c){for(var k=C.ToObject(this),b=[],e=C.ToUint32(k.length),p=C.ToInteger(a),l=0>p?n(e+p,0):f(p,e),p=f(n(C.ToInteger(c),0),e-l),d=0,g;d<p;)g=w(l+d),G(k,g)&&(b[d]=k[g]),d+=1;var J=u.call(arguments,
  2),I=J.length,r;if(I<p){for(d=l;d<e-p;)g=w(d+p),r=w(d+I),G(k,g)?k[r]=k[g]:delete k[r],d+=1;for(d=e;d>e-p+I;)delete k[d-1],--d}else if(I>p)for(d=e-p;d>l;)g=w(d+p-1),r=w(d+I-1),G(k,g)?k[r]=k[g]:delete k[r],--d;d=l;for(l=0;l<J.length;++l)k[d]=J[l],d+=1;k.length=e-p+I;return b}},!d||!r);var k=!{toString:null}.propertyIsEnumerable("toString"),I=function(){}.propertyIsEnumerable("prototype"),J=!G("x","0"),T=function(a){var c=a.constructor;return c&&c.prototype===a},Y=["window","console","parent","self",
  "frames"],Z=function(){if("undefined"===typeof window)return!1;for(var a in window)if(-1===Y.indexOf(a)&&G(window,a)&&null!==window[a]&&"object"===typeof window[a])try{T(window[a])}catch(c){return!0}return!1}(),U="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),aa=U.length,V=function(a){var c="[object Arguments]"===R(a);c||(c=!O(a)&&null!==a&&"object"===typeof a&&"number"===typeof a.length&&0<=a.length&&l(a.callee));return c};x(m,{keys:function(a){var c=
  l(a),b=V(a),f=null!==a&&"object"===typeof a,e=f&&E(a);if(!f&&!c&&!b)throw new TypeError("Object.keys called on a non-object");f=[];c=I&&c;if(e&&J||b)for(e=0;e<a.length;++e)B.call(f,w(e));if(!b)for(var d in a)c&&"prototype"===d||!G(a,d)||B.call(f,w(d));if(k)for(b=Z||T(a),d=0;d<aa;d++)e=U[d],b&&"constructor"===e||!G(a,e)||B.call(f,e);return f}});var d=m.keys&&function(){return 2===m.keys(arguments).length}(1,2),W=m.keys;x(m,{keys:function(a){return V(a)?W(u.call(a)):W(a)}},!d);d=Date.prototype.toISOString&&
  -1===(new Date(-621987552E5)).toISOString().indexOf("-000001");r=Date.prototype.toISOString&&"1969-12-31T23:59:59.999Z"!==(new Date(-1)).toISOString();x(Date.prototype,{toISOString:function(){var a,c,k,b;if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");b=this.getUTCFullYear();a=this.getUTCMonth();b+=Math.floor(a/12);a=[(a%12+12)%12+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()];b=(0>b?"-":9999<b?"+":"")+F("00000"+
    Math.abs(b),0<=b&&9999>=b?-4:-6);for(c=a.length;c--;)k=a[c],10>k&&(a[c]="0"+k);return b+"-"+u.call(a,0,2).join("-")+"T"+u.call(a,2).join(":")+"."+F("000"+this.getUTCMilliseconds(),-3)+"Z"}},d||r);(function(){try{return Date.prototype.toJSON&&null===(new Date(NaN)).toJSON()&&-1!==(new Date(-621987552E5)).toJSON().indexOf("-000001")&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(a){return!1}})()||(Date.prototype.toJSON=function(a){a=m(this);var c=C.ToPrimitive(a);if("number"===
  typeof c&&!isFinite(c))return null;c=a.toISOString;if(!l(c))throw new TypeError("toISOString property is not callable");return c.call(a)});d=1E15===Date.parse("+033658-09-27T01:46:40.000Z");r=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));b=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(!Date.parse||b||r||!d)Date=function(a){var c=function(k,b,f,e,d,p,l){var g=arguments.length,g=this instanceof a?1===
g&&w(k)===k?new a(c.parse(k)):7<=g?new a(k,b,f,e,d,p,l):6<=g?new a(k,b,f,e,d,p):5<=g?new a(k,b,f,e,d):4<=g?new a(k,b,f,e):3<=g?new a(k,b,f):2<=g?new a(k,b):1<=g?new a(k):new a:a.apply(this,arguments);x(g,{constructor:c},!0);return g},k=/^(\d{4}|[+-]\d{6})(?:-(\d{2})(?:-(\d{2})(?:T(\d{2}):(\d{2})(?::(\d{2})(?:(\.\d{1,}))?)?(Z|(?:([-+])(\d{2}):(\d{2})))?)?)?)?$/,b=[0,31,59,90,120,151,181,212,243,273,304,334,365],e=function(a,c){var k=1<c?1:0;return b[c]+Math.floor((a-1969+k)/4)-Math.floor((a-1901+k)/
    100)+Math.floor((a-1601+k)/400)+365*(a-1970)},f;for(f in a)G(a,f)&&(c[f]=a[f]);x(c,{now:a.now,UTC:a.UTC},!0);c.prototype=a.prototype;x(c.prototype,{constructor:c},!0);x(c,{parse:function(c){var b=k.exec(c);if(b){var f=y(b[1]),d=y(b[2]||1)-1,p=y(b[3]||1)-1,l=y(b[4]||0),g=y(b[5]||0),n=y(b[6]||0),A=Math.floor(1E3*y(b[7]||0)),J=Boolean(b[4]&&!b[8]),I="-"===b[9]?1:-1,r=y(b[10]||0),b=y(b[11]||0);return l<(0<g||0<n||0<A?24:25)&&60>g&&60>n&&1E3>A&&-1<d&&12>d&&24>r&&60>b&&-1<p&&p<e(f,d+1)-e(f,d)&&(f=60*(24*
  (e(f,d)+p)+l+r*I),f=1E3*(60*(f+g+b*I)+n)+A,J&&(f=y(new a(1970,0,1,0,0,0,f))),-864E13<=f&&864E13>=f)?f:NaN}return a.parse.apply(this,arguments)}});return c}(Date);Date.now||(Date.now=function(){return(new Date).getTime()});var d=v.toFixed&&("0.000"!==(8E-5).toFixed(3)||"1"!==(.9).toFixed(0)||"1.25"!==(1.255).toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0)),z={base:1E7,size:6,data:[0,0,0,0,0,0],multiply:function(a,c){for(var k=-1,b=c;++k<z.size;)b+=a*z.data[k],z.data[k]=b%z.base,
  b=Math.floor(b/z.base)},divide:function(a){for(var c=z.size,k=0;0<=--c;)k+=z.data[c],z.data[c]=Math.floor(k/a),k=k%a*z.base},numToString:function(){for(var a=z.size,c="";0<=--a;)if(""!==c||0===a||0!==z.data[a])var k=w(z.data[a]),c=""===c?k:c+(F("0000000",0,7-k.length)+k);return c},pow:function A(a,c,k){return 0===c?k:1===c%2?A(a,c-1,k*a):A(a*a,c/2,k)},log:function(a){for(var c=0;4096<=a;)c+=12,a/=4096;for(;2<=a;)c+=1,a/=2;return c}};x(v,{toFixed:function(a){var c,k,b;a=y(a);a=a!==a?0:Math.floor(a);
  if(0>a||20<a)throw new RangeError("Number.toFixed called with invalid number of decimals");c=y(this);if(c!==c)return"NaN";if(-1E21>=c||1E21<=c)return w(c);k="";0>c&&(k="-",c=-c);b="0";if(1E-21<c)if(b=z.log(c*z.pow(2,69,1))-69,c=0>b?c*z.pow(2,-b,1):c/z.pow(2,b,1),c*=4503599627370496,b=52-b,0<b){z.multiply(0,c);for(c=a;7<=c;)z.multiply(1E7,0),c-=7;z.multiply(z.pow(10,c,1),0);for(c=b-1;23<=c;)z.divide(8388608),c-=23;z.divide(1<<c);z.multiply(1,1);z.divide(2);b=z.numToString()}else z.multiply(0,c),z.multiply(1<<
    -b,0),b=z.numToString()+F("0.00000000000000000000",2,2+a);0<a?(c=b.length,b=c<=a?k+F("0.0000000000000000000",0,a-c+2)+b:k+F(b,0,c-a)+"."+F(b,c-a)):b=k+b;return b}},d);2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||1<".".split(/()()/).length?function(){var a="undefined"===typeof/()??/.exec("")[1];q.split=function(c,k){var b=this;if("undefined"===typeof c&&0===k)return[];if(!L(c))return D(this,
  c,k);var f=[],e=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.extended?"x":"")+(c.sticky?"y":""),d=0,p,l,g,n=new RegExp(c.source,e+"g"),b=b+"";a||(p=new RegExp("^"+n.source+"$(?!\\s)",e));var J="undefined"===typeof k?4294967295:C.ToUint32(k);for(l=n.exec(b);l;){e=l.index+l[0].length;if(e>d&&(B.call(f,F(b,d,l.index)),!a&&1<l.length&&l[0].replace(p,function(){for(var a=1;a<arguments.length-2;a++)"undefined"===typeof arguments[a]&&(l[a]=void 0)}),1<l.length&&l.index<b.length&&B.apply(f,u.call(l,1)),
    g=l[0].length,d=e,f.length>=J))break;n.lastIndex===l.index&&n.lastIndex++;l=n.exec(b)}d===b.length?!g&&n.test("")||B.call(f,""):B.call(f,F(b,d));return f.length>J?F(f,0,J):f}}():"0".split(void 0,0).length&&(q.split=function(a,c){return"undefined"===typeof a&&0===c?[]:D(this,a,c)});var X=q.replace;(function(){var a=[];"x".replace(/x(.)?/g,function(c,k){B.call(a,k)});return 1===a.length&&"undefined"===typeof a[0]})()||(q.replace=function(a,c){var k=l(c),b=L(a)&&/\)[*?]/.test(a.source);return k&&b?X.call(this,
  a,function(k){var b=arguments.length,f=a.lastIndex;a.lastIndex=0;var e=a.exec(k)||[];a.lastIndex=f;B.call(e,arguments[b-2],arguments[b-1]);return c.apply(this,e)}):X.call(this,a,c)});var ba=q.substr,v="".substr&&"b"!=="0b".substr(-1);x(q,{substr:function(a,c){var k=a;0>a&&(k=n(this.length+a,0));return ba.call(this,k,c)}},v);var ca=RegExp("^[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*"),
  da=RegExp("[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*$"),v=q.trim&&("\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff".trim()||!"\u200b".trim());x(q,{trim:function(){if("undefined"===typeof this||
  null===this)throw new TypeError("can't convert "+this+" to object");return w(this).replace(ca,"").replace(da,"")}},v);if(8!==parseInt("\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff08")||22!==parseInt("\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff0x16"))parseInt=function(a){var c=/^0[xX]/;return function(k,b){var f=w(k).trim(),
  e=y(b)||(c.test(f)?16:10);return a(f,e)}}(parseInt)});(function(h,g){"function"===typeof define&&define.amd?define(g):"object"===typeof exports?module.exports=g():h.returnExports=g()})(this,function(){var h=Function.prototype.call,g=Object.prototype,m=h.bind(g.hasOwnProperty),d=h.bind(g.propertyIsEnumerable),r,w,q,y,v=m(g,"__defineGetter__");v&&(r=h.bind(g.__defineGetter__),w=h.bind(g.__defineSetter__),q=h.bind(g.__lookupGetter__),y=h.bind(g.__lookupSetter__));Object.getPrototypeOf||(Object.getPrototypeOf=function(a){var b=a.__proto__;return b||null===
b?b:a.constructor?a.constructor.prototype:g});h=function(a){try{return a.sentinel=0,0===Object.getOwnPropertyDescriptor(a,"sentinel").value}catch(b){return!1}};if(Object.defineProperty){var u=h({});if("undefined"!==typeof document&&!h(document.createElement("div"))||!u)var t=Object.getOwnPropertyDescriptor}if(!Object.getOwnPropertyDescriptor||t)Object.getOwnPropertyDescriptor=function(a,b){if("object"!==typeof a&&"function"!==typeof a||null===a)throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object: "+
  a);if(t)try{return t.call(Object,a,b)}catch(f){}var e;if(!m(a,b))return e;e={enumerable:d(a,b),configurable:!0};if(v){var p=a.__proto__,n=a!==g;n&&(a.__proto__=g);var r=q(a,b),h=y(a,b);n&&(a.__proto__=p);if(r||h)return r&&(e.get=r),h&&(e.set=h),e}e.value=a[b];e.writable=!0;return e};Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(a){return Object.keys(a)});if(!Object.create){var B,a=function(){if(!document.domain)return!1;try{return!!new ActiveXObject("htmlfile")}catch(a){return!1}},
  e=function(){var a;a=new ActiveXObject("htmlfile");a.write("<script>\x3c/script>");a.close();return a.parentWindow.Object.prototype},b=function(){var a=document.createElement("iframe"),b=document.body||document.documentElement,f;a.style.display="none";b.appendChild(a);a.src="javascript:";f=a.contentWindow.Object.prototype;b.removeChild(a);return f};B="undefined"===typeof document?function(){return{__proto__:null}}:function(){var c=a()?e():b();delete c.constructor;delete c.hasOwnProperty;delete c.propertyIsEnumerable;
  delete c.isPrototypeOf;delete c.toLocaleString;delete c.toString;delete c.valueOf;c.__proto__=null;var f=function(){};f.prototype=c;B=function(){return new f};return new f};Object.create=function(a,b){var f;f=function(){};if(null===a)f=B();else{if("object"!==typeof a&&"function"!==typeof a)throw new TypeError("Object prototype may only be an Object or null");f.prototype=a;f=new f;f.__proto__=a}void 0!==b&&Object.defineProperties(f,b);return f}}u=function(a){try{return Object.defineProperty(a,"sentinel",
  {}),"sentinel"in a}catch(b){return!1}};if(Object.defineProperty&&(h=u({}),u="undefined"===typeof document||u(document.createElement("div")),!h||!u))var n=Object.defineProperty,f=Object.defineProperties;if(!Object.defineProperty||n)Object.defineProperty=function(a,b,f){if("object"!==typeof a&&"function"!==typeof a||null===a)throw new TypeError("Object.defineProperty called on non-object: "+a);if("object"!==typeof f&&"function"!==typeof f||null===f)throw new TypeError("Property description must be an object: "+
  f);if(n)try{return n.call(Object,a,b,f)}catch(e){}if("value"in f)if(v&&(q(a,b)||y(a,b))){var d=a.__proto__;a.__proto__=g;delete a[b];a[b]=f.value;a.__proto__=d}else a[b]=f.value;else{if(!v&&("get"in f||"set"in f))throw new TypeError("getters & setters can not be defined on this javascript engine");"get"in f&&r(a,b,f.get);"set"in f&&w(a,b,f.set)}return a};if(!Object.defineProperties||f)Object.defineProperties=function(a,b){if(f)try{return f.call(Object,a,b)}catch(e){}Object.keys(b).forEach(function(f){"__proto__"!==
f&&Object.defineProperty(a,f,b[f])});return a};Object.seal||(Object.seal=function(a){if(Object(a)!==a)throw new TypeError("Object.seal can only be called on Objects.");return a});Object.freeze||(Object.freeze=function(a){if(Object(a)!==a)throw new TypeError("Object.freeze can only be called on Objects.");return a});try{Object.freeze(function(){})}catch(p){Object.freeze=function(a){return function(b){return"function"===typeof b?b:a(b)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=
  function(a){if(Object(a)!==a)throw new TypeError("Object.preventExtensions can only be called on Objects.");return a});Object.isSealed||(Object.isSealed=function(a){if(Object(a)!==a)throw new TypeError("Object.isSealed can only be called on Objects.");return!1});Object.isFrozen||(Object.isFrozen=function(a){if(Object(a)!==a)throw new TypeError("Object.isFrozen can only be called on Objects.");return!1});Object.isExtensible||(Object.isExtensible=function(a){if(Object(a)!==a)throw new TypeError("Object.isExtensible can only be called on Objects.");
  for(var b="";m(a,b);)b+="?";a[b]=!0;var f=m(a,b);delete a[b];return f})});(function(h){h.console=h.console||{};h=h.console;for(var g,m={},d=function(){},r=["memory"],w="assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profiles profileEnd show table time timeEnd timeline timelineEnd timeStamp trace warn".split(" ");g=r.pop();)h[g]||(h[g]=m);for(;g=w.pop();)h[g]||(h[g]=d)})("undefined"===typeof window?this:window);/*
 HTML5 Shiv 3.7.3-pre | @afarkas @jdalton @jon_neal @rem | MIT/GPL2 Licensed
 */
!function(h,g){function m(){var a=n.elements;return"string"==typeof a?a.split(" "):a}function d(f){var d=b[f[a]];return d||(d={},e++,f[a]=e,b[e]=d),d}function r(a,b,c){if(b||(b=g),v)return b.createElement(a);c||(c=d(b));var e;return e=c.cache[a]?c.cache[a].cloneNode():B.test(a)?(c.cache[a]=c.createElem(a)).cloneNode():c.createElem(a),!e.canHaveChildren||t.test(a)||e.tagUrn?e:c.frag.appendChild(e)}function w(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,
  b.frag=b.createFrag());a.createElement=function(c){return n.shivMethods?r(c,a,b):b.createElem(c)};a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+m().join().replace(/[\w\-:]+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(n,b.frag)}function q(a){a||(a=g);var b=d(a);if(n.shivCSS&&!y&&!b.hasCSS){var c,e=a;c=e.createElement("p");e=e.getElementsByTagName("head")[0]||e.documentElement;c=(c.innerHTML=
  "x<style>article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}</style>",e.insertBefore(c.lastChild,e.firstChild));b.hasCSS=!!c}return v||w(a,b),a}var y,v,u=h.html5||{},t=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,B=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,a="_html5shiv",e=0,b={};!function(){try{var a=g.createElement("a");
  a.innerHTML="<xyz></xyz>";y="hidden"in a;var b;if(!(b=1==a.childNodes.length)){g.createElement("a");var c=g.createDocumentFragment();b="undefined"==typeof c.cloneNode||"undefined"==typeof c.createDocumentFragment||"undefined"==typeof c.createElement}v=b}catch(e){v=y=!0}}();var n={elements:u.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video",version:"3.7.3-pre",
  shivCSS:!1!==u.shivCSS,supportsUnknownElements:v,shivMethods:!1!==u.shivMethods,type:"default",shivDocument:q,createElement:r,createDocumentFragment:function(a,b){if(a||(a=g),v)return a.createDocumentFragment();b=b||d(a);for(var c=b.frag.cloneNode(),e=0,n=m(),r=n.length;r>e;e++)c.createElement(n[e]);return c},addElements:function(a,b){var c=n.elements;"string"!=typeof c&&(c=c.join(" "));"string"!=typeof a&&(a=a.join(" "));n.elements=c+" "+a;q(b)}};h.html5=n;q(g);"object"==typeof module&&module.exports&&
(module.exports=n)}("undefined"!=typeof window?window:this,document);!function(h,g,m){"undefined"!=typeof module&&module.exports?module.exports=m():"function"==typeof define&&define.amd?define(m):g[h]=m()}("reqwest",this,function(){function h(a,b,e){return function(){if(a._aborted)return e(a.request);if(a._timedOut)return e(a.request,"Request is aborted: timeout");if(a.request&&4==a.request[M]){a.request.onreadystatechange=R;var f=l.exec(a.url);(f=f&&f[1]||window.location.protocol,c.test(f)?S.test(a.request.status):a.request.response)?b(a.request):e(a.request)}}}function g(a,
  b){var c=b.headers||{},e;c.Accept=c.Accept||D.accept[b.type]||D.accept["*"];var f="function"==typeof FormData&&b.data instanceof FormData;b.crossOrigin||c[Q]||(c[Q]=D.requestedWith);c[E]||f||(c[E]=b.contentType||D.contentType);for(e in c)c.hasOwnProperty(e)&&"setRequestHeader"in a&&a.setRequestHeader(e,c[e])}function m(a){K=a}function d(a,b){return a+(/\?/.test(a)?"&":"?")+b}function r(a,b,c,e){var g=N++,n=a.jsonpCallback||"callback";a=a.jsonpCallbackName||u.getcallbackPrefix(g);var l=new RegExp("((^|\\?|&)"+
  n+")=([^&]+)"),r=e.match(l),h=p.createElement("script"),q=0,w=-1!==navigator.userAgent.indexOf("MSIE 10.0");return r?"?"===r[3]?e=e.replace(l,"$1="+a):a=r[3]:e=d(e,n+"="+a),f[a]=m,h.type="text/javascript",h.src=e,h.async=!0,"undefined"!=typeof h.onreadystatechange&&!w&&(h.htmlFor=h.id="_reqwest_"+g),h.onload=h.onreadystatechange=function(){if(h[M]&&"complete"!==h[M]&&"loaded"!==h[M]||q)return!1;h.onload=h.onreadystatechange=null;h.onclick&&h.onclick();b(K);K=void 0;x.removeChild(h);q=1},x.appendChild(h),
{abort:function(){h.onload=h.onreadystatechange=null;c({},"Request is aborted: timeout",{});K=void 0;x.removeChild(h);q=1}}}function w(a,b){var c=this.o,e=(c.method||"GET").toUpperCase(),n="string"==typeof c?c:c.url,p=!1!==c.processData&&c.data&&"string"!=typeof c.data?u.toQueryString(c.data):c.data||null,l,q=!1;("jsonp"==c.type||"GET"==e)&&p&&(n=d(n,p),p=null);"jsonp"==c.type?c=r(c,a,b,n):(l=c.xhr&&c.xhr(c)||O(c),l.open(e,n,!1===c.async?!1:!0),g(l,c),"undefined"!=typeof c.withCredentials&&"undefined"!=
typeof l.withCredentials&&(l.withCredentials=!!c.withCredentials),c=(f[G]&&l instanceof f[G]?(l.onload=a,l.onerror=b,l.onprogress=function(){},q=!0):l.onreadystatechange=h(this,a,b),c.before&&c.before(l),q?setTimeout(function(){l.send(p)},200):l.send(p),l));return c}function q(a,b){this.o=a;this.fn=b;v.apply(this,arguments)}function y(a){if(a.match("json"))return"json";if(a.match("javascript"))return"js";if(a.match("text"))return"html";if(a.match("xml"))return"xml"}function v(a,b){function c(b){a.timeout&&
clearTimeout(d.timeout);for(d.timeout=null;0<d._completeHandlers.length;)d._completeHandlers.shift()(b)}function e(a,b,k){a=d.request;d._responseArgs.resp=a;d._responseArgs.msg=b;d._responseArgs.t=k;for(d._erred=!0;0<d._errorHandlers.length;)d._errorHandlers.shift()(a,b,k);c(a)}this.url="string"==typeof a?a:a.url;this.timeout=null;this._fulfilled=!1;this._successHandler=function(){};this._fulfillmentHandlers=[];this._errorHandlers=[];this._completeHandlers=[];this._erred=!1;this._responseArgs={};
  var d=this;b=b||function(){};a.timeout&&(this.timeout=setTimeout(function(){d._timedOut=!0;d.request.abort()},a.timeout));a.success&&(this._successHandler=function(){a.success.apply(a,arguments)});a.error&&this._errorHandlers.push(function(){a.error.apply(a,arguments)});a.complete&&this._completeHandlers.push(function(){a.complete.apply(a,arguments)});this.request=w.call(this,function(n){var g=a.type||n&&y(n.getResponseHeader("Content-Type"));n="jsonp"!==g?d.request:n;var p=H.dataFilter(n.responseText,
      g);try{n.responseText=p}catch(l){}if(p)switch(g){case "json":try{n=f.JSON?f.JSON.parse(p):eval("("+p+")")}catch(r){return e(n,"Could not parse JSON in response",r)}break;case "js":n=eval(p);break;case "html":n=p;break;case "xml":n=n.responseXML&&n.responseXML.parseError&&n.responseXML.parseError.errorCode&&n.responseXML.parseError.reason?null:n.responseXML}d._responseArgs.resp=n;d._fulfilled=!0;b(n);for(d._successHandler(n);0<d._fulfillmentHandlers.length;)n=d._fulfillmentHandlers.shift()(n);c(n)},
    e)}function u(a,b){return new q(a,b)}function t(a){return a?a.replace(/\r?\n/g,"\r\n"):""}function B(a,b){var c=a.name,e=a.tagName.toLowerCase(),f=function(a){a&&!a.disabled&&b(c,t(a.attributes.value&&a.attributes.value.specified?a.value:a.text))},d,n,p;if(!a.disabled&&c)switch(e){case "input":/reset|button|image|file/i.test(a.type)||(d=/checkbox/i.test(a.type),n=/radio/i.test(a.type),p=a.value,(!d&&!n||a.checked)&&b(c,t(d&&""===p?"on":p)));break;case "textarea":b(c,t(a.value));break;case "select":if("select-one"===
  a.type.toLowerCase())f(0<=a.selectedIndex?a.options[a.selectedIndex]:null);else for(e=0;a.length&&e<a.length;e++)a.options[e].selected&&f(a.options[e])}}function a(){var a,b;for(b=0;b<arguments.length;b++){a=arguments[b];/input|select|textarea/i.test(a.tagName)&&B(a,this);for(var c=["input","select","textarea"],e=void 0,f=void 0,d=void 0,e=0;e<c.length;e++)for(d=a[L](c[e]),f=0;f<d.length;f++)B(d[f],this)}}function e(){return u.toQueryString(u.serializeArray.apply(null,arguments))}function b(){var b=
{};return a.apply(function(a,c){a in b?(b[a]&&!F(b[a])&&(b[a]=[b[a]]),b[a].push(c)):b[a]=c},arguments),b}function n(a,b,c,e){var f,d,p=/\[\]$/;if(F(b))for(f=0;b&&f<b.length;f++)d=b[f],c||p.test(a)?e(a,d):n(a+"["+("object"==typeof d?f:"")+"]",d,c,e);else if(b&&"[object Object]"===b.toString())for(f in b)n(a+"["+f+"]",b[f],c,e);else e(a,b)}var f=window,p=document,c=/^http/,l=/(^\w+):\/\//,S=/^(20\d|1223)$/,L="getElementsByTagName",M="readyState",E="Content-Type",Q="X-Requested-With",x=p[L]("head")[0],
  N=0,C="reqwest_"+ +new Date,K,G="XDomainRequest",R=function(){},F="function"==typeof Array.isArray?Array.isArray:function(a){return a instanceof Array},D={contentType:"application/x-www-form-urlencoded",requestedWith:"XMLHttpRequest",accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},O=function(a){if(!0===a.crossOrigin){if((a=
      f.XMLHttpRequest?new XMLHttpRequest:null)&&"withCredentials"in a)return a;if(f[G])return new XDomainRequest;throw Error("Browser does not support cross-origin requests");}return f.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},H={dataFilter:function(a){return a}};return q.prototype={abort:function(){this._aborted=!0;this.request.abort()},retry:function(){v.call(this,this.o,this.fn)},then:function(a,b){return a=a||function(){},b=b||function(){},this._fulfilled?this._responseArgs.resp=
  a(this._responseArgs.resp):this._erred?b(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(a),this._errorHandlers.push(b)),this},always:function(a){return this._fulfilled||this._erred?a(this._responseArgs.resp):this._completeHandlers.push(a),this},fail:function(a){return this._erred?a(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(a),this},"catch":function(a){return this.fail(a)}},u.serializeArray=function(){var b=
  [];return a.apply(function(a,c){b.push({name:a,value:c})},arguments),b},u.serialize=function(){if(0===arguments.length)return"";var a,c,f=Array.prototype.slice.call(arguments,0);return a=f.pop(),a&&a.nodeType&&f.push(a)&&(a=null),a&&(a=a.type),"map"==a?c=b:"array"==a?c=u.serializeArray:c=e,c.apply(null,f)},u.toQueryString=function(a,b){var c,e=b||!1,f=[],d=encodeURIComponent,p=function(a,b){b="function"==typeof b?b():null==b?"":b;f[f.length]=d(a)+"="+d(b)};if(F(a))for(c=0;a&&c<a.length;c++)p(a[c].name,
  a[c].value);else for(c in a)a.hasOwnProperty(c)&&n(c,a[c],e,p);return f.join("&").replace(/%20/g,"+")},u.getcallbackPrefix=function(){return C},u.compat=function(a,b){return a&&(a.type&&(a.method=a.type)&&delete a.type,a.dataType&&(a.type=a.dataType),a.jsonpCallback&&(a.jsonpCallbackName=a.jsonpCallback)&&delete a.jsonpCallback,a.jsonp&&(a.jsonpCallback=a.jsonp)),new q(a,b)},u.ajaxSetup=function(a){a=a||{};for(var b in a)H[b]=a[b]},u});(function(h){"function"==typeof bootstrap?bootstrap("event",h):"object"==typeof exports?module.exports=h():"function"==typeof define&&define.amd?define(h):"undefined"!=typeof ses?ses.ok()&&(ses.makeEvent=h):"undefined"!=typeof window?window.Event=h():global.Event=h()})(function(){return function(h,g,m){function d(q,w){if(!g[q]){if(!h[q]){var m="function"==typeof require&&require;if(!w&&m)return m(q,!0);if(r)return r(q,!0);throw Error("Cannot find module '"+q+"'");}m=g[q]={exports:{}};h[q][0](function(g){var r=
  h[q][1][g];return d(r?r:g)},m,m.exports)}return g[q].exports}for(var r="function"==typeof require&&require,w=0;m.length>w;w++)d(m[w]);return d}({1:[function(h,g){function m(g){if(this instanceof m)if(g){var h=d,q;for(q in h)g[q]=h[q]}else g=void 0;else g=new m(g);return g}var d=m.prototype;g.exports=m;d.on=function(d,g){return this._cbs=this._cbs||{},(this._cbs[d]||(this._cbs[d]=[])).unshift(g),this};d.off=function(d,g){if(this._cbs=this._cbs||{},!d)return this._cbs={};if(!g)return delete this._cbs[d];
  for(var h,m=this._cbs[d]||[];m&&~(h=m.indexOf(g));)m.splice(h,1);return this};d.fire=function(d){this._cbs=this._cbs||{};var g=d.ctx||this,h=this._cbs[d.name||d];if(h)for(var m=[].slice.call(arguments,1),v=h.length;v--;)h[v].apply(g,m);return this}},{}]},{},[1])(1)});(function(h){function g(){this.frames=[];this.lastId=0;this.raf=m;this.batch={hash:{},read:[],write:[],mode:null}}var m=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(d){return window.setTimeout(d,1E3/60)};g.prototype.read=function(d,g){var h=this.add("read",d,g),q=h.id;this.batch.read.push(h.id);if("reading"===this.batch.mode||this.batch.scheduled)return q;this.scheduleBatch();return q};g.prototype.write=
  function(d,g){var h=this.add("write",d,g),q=this.batch.mode,m=h.id;this.batch.write.push(h.id);if("writing"===q||"reading"===q||this.batch.scheduled)return m;this.scheduleBatch();return m};g.prototype.defer=function(d,g,h){"function"===typeof d&&(h=g,g=d,d=1);var q=this;return this.schedule(d-1,function(){q.run({fn:g,ctx:h})})};g.prototype.clear=function(d){if("function"===typeof d)return this.clearFrame(d);d=Number(d);var g=this.batch.hash[d];if(g){var g=this.batch[g.type],h=g.indexOf(d);delete this.batch.hash[d];
  ~h&&g.splice(h,1)}};g.prototype.clearFrame=function(d){d=this.frames.indexOf(d);~d&&this.frames.splice(d,1)};g.prototype.scheduleBatch=function(){var d=this;this.schedule(0,function(){d.batch.scheduled=!1;d.runBatch()});this.batch.scheduled=!0};g.prototype.uniqueId=function(){return++this.lastId};g.prototype.flush=function(d){for(var g;g=d.shift();)this.run(this.batch.hash[g])};g.prototype.runBatch=function(){try{this.batch.mode="reading",this.flush(this.batch.read),this.batch.mode="writing",this.flush(this.batch.write),
  this.batch.mode=null}catch(d){throw this.runBatch(),d;}};g.prototype.add=function(d,g,h){var q=this.uniqueId();return this.batch.hash[q]={id:q,fn:g,ctx:h,type:d}};g.prototype.run=function(d){var g=d.ctx||this,h=d.fn;delete this.batch.hash[d.id];if(!this.onError)return h.call(g);try{h.call(g)}catch(q){this.onError(q)}};g.prototype.loop=function(){var d=this,g=this.raf;this.looping||(g(function q(){var h=d.frames.shift();d.frames.length?g(q):d.looping=!1;h&&h()}),this.looping=!0)};g.prototype.schedule=
  function(d,g){if(this.frames[d])return this.schedule(d+1,g);this.loop();return this.frames[d]=g};h=h||new g;"undefined"!==typeof module&&module.exports?module.exports=h:"function"===typeof define&&define.amd?define(function(){return h}):window.fastdom=h})(window.fastdom);(function(h){function g(){return""===v.hash||"#"===v.hash}function m(a,e){for(var b=0;b<a.length&&!1!==e(a[b],b,a);b+=1);}function d(a){for(var e=[],b=0,d=a.length;b<d;b++)e=e.concat(a[b]);return e}function r(a,e,b){if(!a.length)return b();var d=0;(function p(){e(a[d],function(c){c||!1===c?(b(c),b=function(){}):(d+=1,d===a.length?b():p())})})()}function w(a,e,b){b=a;for(var d in e)if(e.hasOwnProperty(d)&&(b=e[d](a),b!==a))break;return b===a?"([._a-zA-Z0-9-%()]+)":b}function q(a,e){for(var b,d=0,f=
  "";b=a.substr(d).match(/[^\w\d\- %@&]*\*[^\w\d\- %@&]*/);)d=b.index+b[0].length,b[0]=b[0].replace(/^\*/,"([_.()!\\ %@&a-zA-Z0-9-]+)"),f+=a.substr(0,b.index)+b[0];a=f+a.substr(d);if(b=a.match(/:([^\/]+)/ig))for(var f=b.length,g=0;g<f;g++)d=b[g],a="::"===d.slice(0,2)?d.slice(1):a.replace(d,w(d,e));return a}function y(a,e,b,d){var f=0,g=0,c=0;b=(b||"(").toString();d=(d||")").toString();var h;for(h=0;h<a.length;h++)if(c=a[h],c.indexOf(b,f)>c.indexOf(d,f)||~c.indexOf(b,f)&&!~c.indexOf(d,f)||!~c.indexOf(b,
    f)&&~c.indexOf(d,f)){g=c.indexOf(b,f);c=c.indexOf(d,f);if(~g&&!~c||!~g&&~c)a=[a.slice(0,(h||1)+1).join(e)].concat(a.slice((h||1)+1));f=(c>g?c:g)+1;h=0}else f=0;return a}var v=document.location,u={mode:"modern",hash:v.hash,history:!1,check:function(){var a=v.hash;a!=this.hash&&(this.hash=a,this.onHashChanged())},fire:function(){if("modern"===this.mode)!0===this.history?window.onpopstate():window.onhashchange();else this.onHashChanged()},init:function(a,e){function b(a){for(var b=0,e=t.listeners.length;b<
e;b++)t.listeners[b](a)}var d=this;this.history=e;t.listeners||(t.listeners=[]);if("onhashchange"in window&&(void 0===document.documentMode||7<document.documentMode))!0===this.history?setTimeout(function(){window.onpopstate=b},500):window.onhashchange=b,this.mode="modern";else{var f=document.createElement("iframe");f.id="state-frame";f.style.display="none";document.body.appendChild(f);this.writeFrame("");"onpropertychange"in document&&"attachEvent"in document&&document.attachEvent("onpropertychange",
  function(){"location"===event.propertyName&&d.check()});window.setInterval(function(){d.check()},50);this.onHashChanged=b;this.mode="legacy"}t.listeners.push(a);return this.mode},destroy:function(a){if(t&&t.listeners)for(var e=t.listeners,b=e.length-1;0<=b;b--)e[b]===a&&e.splice(b,1)},setHash:function(a){"legacy"===this.mode&&this.writeFrame(a);!0===this.history?(window.history.pushState({},document.title,a),this.fire()):v.hash="/"===a[0]?a:"/"+a;return this},writeFrame:function(a){var e=document.getElementById("state-frame"),
  e=e.contentDocument||e.contentWindow.document;e.open();e.write("<script>_hash = '"+a+"'; onload = parent.listener.syncHash;<script>");e.close()},syncHash:function(){var a=this._hash;a!=v.hash&&(v.hash=a);return this},onHashChanged:function(){}},t=h.Router=function(a){if(!(this instanceof t))return new t(a);this.params={};this.routes={};this.methods=["on","once","after","before"];this.scope=[];this._methods={};this._insert=this.insert;this.insert=this.insertEx;this.historySupport=null!=(null!=window.history?
    window.history.pushState:null);this.configure();this.mount(a||{})};t.prototype.init=function(a){var e=this;this.handler=function(a){a=a&&a.newURL||window.location.hash;a=!0===e.history?e.getPath():a.replace(/.*#/,"");e.dispatch("on","/"===a.charAt(0)?a:"/"+a)};u.init(this.handler,this.history);!1===this.history?g()&&a?v.hash=a:g()||e.dispatch("on","/"+v.hash.replace(/^(#\/|#|\/)/,"")):(this.convert_hash_in_init?(a=g()&&a?a:g()?null:v.hash.replace(/^#/,""))&&window.history.replaceState({},document.title,
  a):a=this.getPath(),(a||!0===this.run_in_init)&&this.handler());return this};t.prototype.explode=function(){var a=!0===this.history?this.getPath():v.hash;"/"===a.charAt(1)&&(a=a.slice(1));return a.slice(1,a.length).split("/")};t.prototype.setRoute=function(a,e,b){var d=this.explode();"number"===typeof a&&"string"===typeof e?d[a]=e:"string"===typeof b?d.splice(a,e,s):d=[a];u.setHash(d.join("/"));return d};t.prototype.insertEx=function(a,e,b,d){"once"===a&&(a="on",b=function(a){var b=!1;return function(){if(!b)return b=
  !0,a.apply(this,arguments)}}(b));return this._insert(a,e,b,d)};t.prototype.getRoute=function(a){var e=a;return e="number"===typeof a?this.explode()[a]:"string"===typeof a?this.explode().indexOf(a):this.explode()};t.prototype.destroy=function(){u.destroy(this.handler);return this};t.prototype.getPath=function(){var a=window.location.pathname;"/"!==a.substr(0,1)&&(a="/"+a);return a};var B=/\?.*/;t.prototype.configure=function(a){a=a||{};for(var e=0;e<this.methods.length;e++)this._methods[this.methods[e]]=
  !0;this.recurse=a.recurse||this.recurse||!1;this.async=a.async||!1;this.delimiter=a.delimiter||"/";this.strict="undefined"===typeof a.strict?!0:a.strict;this.notfound=a.notfound;this.resource=a.resource;this.history=a.html5history&&this.historySupport||!1;this.run_in_init=!0===this.history&&!1!==a.run_handler_in_init;this.convert_hash_in_init=!0===this.history&&!1!==a.convert_hash_in_init;this.every={after:a.after||null,before:a.before||null,on:a.on||null};return this};t.prototype.param=function(a,
  e){":"!==a[0]&&(a=":"+a);var b=new RegExp(a,"g");this.params[a]=function(a){return a.replace(b,e.source||e)};return this};t.prototype.on=t.prototype.route=function(a,e,b){var d=this;b||"function"!=typeof e||(b=e,e=a,a="on");if(Array.isArray(e))return e.forEach(function(e){d.on(a,e,b)});e.source&&(e=e.source.replace(/\\\//ig,"/"));if(Array.isArray(a))return a.forEach(function(a){d.on(a.toLowerCase(),e,b)});e=e.split(new RegExp(this.delimiter));e=y(e,this.delimiter);this.insert(a,this.scope.concat(e),
  b)};t.prototype.path=function(a,e){var b=this.scope.length;a.source&&(a=a.source.replace(/\\\//ig,"/"));a=a.split(new RegExp(this.delimiter));a=y(a,this.delimiter);this.scope=this.scope.concat(a);e.call(this,this);this.scope.splice(b,a.length)};t.prototype.dispatch=function(a,e,b){function d(){f.last=g.after;f.invoke(f.runlist(g),f,b)}var f=this,g=this.traverse(a,e.replace(B,""),this.routes,""),c=this._invoked;this._invoked=!0;if(!g||0===g.length)return this.last=[],"function"===typeof this.notfound&&
this.invoke([this.notfound],{method:a,path:e},b),!1;"forward"===this.recurse&&(g=g.reverse());if((a=this.every&&this.every.after?[this.every.after].concat(this.last):[this.last])&&0<a.length&&c)return this.async?this.invoke(a,this,d):(this.invoke(a,this),d()),!0;d();return!0};t.prototype.invoke=function(a,d,b){var g=this,f;this.async?(f=function(b,c){if(Array.isArray(b))return r(b,f,c);"function"==typeof b&&b.apply(d,(a.captures||[]).concat(c))},r(a,f,function(){b&&b.apply(d,arguments)})):(f=function(b){if(Array.isArray(b))return m(b,
  f);if("function"===typeof b)return b.apply(d,a.captures||[]);"string"===typeof b&&g.resource&&g.resource[b].apply(d,a.captures||[])},m(a,f))};t.prototype.traverse=function(a,d,b,g,f){function h(a){function b(a){for(var c=[],d=0;d<a.length;d++)c[d]=Array.isArray(a[d])?b(a[d]):a[d];return c}function c(a){for(var b=a.length-1;0<=b;b--)Array.isArray(a[b])?(c(a[b]),0===a[b].length&&a.splice(b,1)):f(a[b])||a.splice(b,1)}if(!f)return a;var d=b(a);d.matched=a.matched;d.captures=a.captures;d.after=a.after.filter(f);
  c(d);return d}var c=[],l,q;if(d===this.delimiter&&b[a])return l=[[b.before,b[a]].filter(Boolean)],l.after=[b.after].filter(Boolean),l.matched=!0,l.captures=[],h(l);for(var m in b)if(b.hasOwnProperty(m)&&(!this._methods[m]||this._methods[m]&&"object"===typeof b[m]&&!Array.isArray(b[m]))&&(l=q=g+this.delimiter+m,this.strict||(q+="["+this.delimiter+"]?"),q=d.match(new RegExp("^"+q)))){if(q[0]&&q[0]==d&&b[m][a])return l=[[b[m].before,b[m][a]].filter(Boolean)],l.after=[b[m].after].filter(Boolean),l.matched=
  !0,l.captures=q.slice(1),this.recurse&&b===this.routes&&(l.push([b.before,b.on].filter(Boolean)),l.after=l.after.concat([b.after].filter(Boolean))),h(l);l=this.traverse(a,d,b[m],l);if(l.matched)return 0<l.length&&(c=c.concat(l)),this.recurse&&(c.push([b[m].before,b[m].on].filter(Boolean)),l.after=l.after.concat([b[m].after].filter(Boolean)),b===this.routes&&(c.push([b.before,b.on].filter(Boolean)),l.after=l.after.concat([b.after].filter(Boolean)))),c.matched=!0,c.captures=l.captures,c.after=l.after,
  h(c)}return!1};t.prototype.insert=function(a,d,b,g){var f,h;d=d.filter(function(a){return a&&0<a.length});g=g||this.routes;h=d.shift();/\:|\*/.test(h)&&!/\\d|\\w/.test(h)&&(h=q(h,this.params));if(0<d.length)return g[h]=g[h]||{},this.insert(a,d,b,g[h]);if(h||d.length||g!==this.routes){d=typeof g[h];f=Array.isArray(g[h]);if(g[h]&&!f&&"object"==d)switch(f=typeof g[h][a],f){case "function":g[h][a]=[g[h][a],b];return;case "object":g[h][a].push(b);return;case "undefined":g[h][a]=b;return}else if("undefined"==
  d){d={};d[a]=b;g[h]=d;return}throw Error("Invalid route context: "+d);}f=typeof g[a];switch(f){case "function":g[a]=[g[a],b];break;case "object":g[a].push(b);break;case "undefined":g[a]=b}};t.prototype.extend=function(a){function d(a){b._methods[a]=!0;b[a]=function(){b.on.apply(b,(1===arguments.length?[a,""]:[a]).concat(Array.prototype.slice.call(arguments)))}}var b=this,g=a.length,f;for(f=0;f<g;f++)d(a[f])};t.prototype.runlist=function(a){var e=this.every&&this.every.before?[this.every.before].concat(d(a)):
  d(a);this.every&&this.every.on&&e.push(this.every.on);e.captures=a.captures;e.source=a.source;return e};t.prototype.mount=function(a,d){if(a&&"object"===typeof a&&!Array.isArray(a)){d=d||[];Array.isArray(d)||(d=d.split(this.delimiter));for(var b in a)if(a.hasOwnProperty(b)){var g=b,f=d.slice(0),h=g,c=g.split(this.delimiter),l=typeof a[g],m=""===c[0]||!this._methods[c[0]],q=m?"on":h;m&&(h=h.slice((h.match(new RegExp("^"+this.delimiter))||[""])[0].length),c.shift());m&&"object"===l&&!Array.isArray(a[g])?
  (f=f.concat(c),this.mount(a[g],f)):(m&&(f=f.concat(h.split(this.delimiter)),f=y(f,this.delimiter)),this.insert(q,f,a[g]))}}}})("object"===typeof exports?exports:window);
