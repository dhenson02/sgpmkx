!function(a,b,c,d,e,f){"use strict";function g(a){return"string"==typeof a&&a.length>0?b.createTextNode(a):void 0}function h(a,b,c){return b.addEventListener?b.addEventListener(a,c,!1):b.attachEvent("on"+a,c)}function i(a,b,c){return b.removeEventListener?b.removeEventListener(a,c,!1):b.detachEvent("on"+a,c)}function j(a,b,c){if(a===!0){if(K.inTransition[b]===!0&&c!==!0){return!1}K.inTransition[b]=!0,s.test(b.className)===!1&&(b.className+=" loading")}else{setTimeout(function(){K.inTransition[b]=!1,b.className=b.className.replace(s,"")},200)}}function k(d,e){function f(b){b=b||a.event,b.preventDefault?b.preventDefault():b.returnValue=!1;var c=b.keyCode||b.which||b.charCode||null;if(13===c||"click"===b.type){if(!e){return k(),!0}if(m&&n){if(d={title:m.value.trim(),rootCategory:n.value},!d.title){return m.style.borderColor="red",!1}e(d)}else{var d=!0;e(d)}k()}}function j(b){b=b||a.event,b.preventDefault?b.preventDefault():b.returnValue=!1;var c=b.currentTarget||b.srcElement||this,d=b.keyCode||b.which||b.charCode||null;(27===d||c===q||"click"===b.type)&&k()}function k(){return p.velocity({opacity:0},{duration:75,display:"none"}),i("click",q,j),"new"===z.type&&(i("keyup",m,f),i("keyup",n,f)),i("click",v,f),z.showCancelButton&&i("click",x,j),i("keyup",b,j),o.parentNode.removeChild(o),o=null,p=null,!1}try{k()}catch(l){}"function"!=typeof e&&(e=null);var m,n,o=b.createElement("div"),p=c(o),q=b.createElement("div"),r=b.createElement("div"),s=b.createElement("label"),t=b.createElement("div"),u=b.createElement("div"),v=b.createElement("div"),w=b.createElement("span"),x=b.createElement("div"),y=b.createElement("span"),z={title:d.title||"## Info",text:d.text||"Click OK to continue",type:d.type||"success",showCancelButton:"boolean"==typeof d.showCancelButton?d.showCancelButton:!0,closeOnConfirm:"boolean"==typeof d.closeOnConfirm?d.closeOnConfirm:!0};return o.id="modalOverlay",o.className="modalOverlay "+z.type,q.id="modalBg",q.className="modalBg",t.id="contentModal",t.className="contentModal",r.className="header",v.className="btn",v.id="okButton",u.className="modalButtons",r.innerHTML=H.render(z.title),s.innerHTML=H.render(z.text),t.appendChild(r),t.appendChild(s),"new"===z.type&&(s.setAttribute("for","modalTitleInput"),m=b.createElement("input"),m.id="modalTitleInput",m.name="modalTitleInput",m.setAttribute("type","text"),m.setAttribute("tab-index","0"),m.setAttribute("autofocus",""),n=J,n.id="modalCategorySelect",n.name="modalCategorySelect",t.appendChild(m),t.appendChild(n)),w.appendChild(g("OK!")),v.appendChild(w),u.appendChild(v),z.showCancelButton!==!1&&(y.appendChild(g("Nope.")),x.className="btn",x.id="cancelButton",x.appendChild(y),u.appendChild(x)),t.appendChild(u),o.appendChild(q),o.appendChild(t),h("click",q,j),"new"===z.type&&(h("keyup",m,f),h("keyup",n,f),m.focus()),h("click",v,f),z.showCancelButton!==!1&&h("click",x,j),h("keyup",b,j),B.appendChild(o),p.velocity({opacity:1},{duration:75,display:"block"}),!0}function l(a){K.text=a.getValue(),D.innerHTML=H.render("# "+K.title+"\n"+K.text)}function m(c){c="/"===c&&"Content"!==y?"":"$filter=Category eq '"+c+"'",d({url:"https://kx.afms.mil"+x+"_api/"+z+"/items/?"+c,method:"GET",type:"json",contentType:"application/json",withCredentials:!0,headers:{Accept:"application/json;odata=verbose","text-Type":"application/json;odata=verbose","Content-Type":"application/json;odata=verbose"},success:function(a){var b=a.d.results[0];K.id=b.ID,K.originalTitle=b.Title||"",K.originalText=b.Text||"",K.references=b.References.results||[],K.timestamp=Date&&Date.now()||new Date,K.category=b.Category.split("/"),K.contentType=y,K.text=K.originalText,K.title=K.originalTitle,K.listItemType=b.__metadata.type},error:function(a){},complete:function(){function c(b){b=b||a.event;var c=b.currentTarget||b.srcElement||this;K.title=c.value,D.innerHTML=H.render("# "+K.title+"\n"+K.text)}function e(b){b=b||a.event,b.stopPropagation?b.stopPropagation():b.cancelBubble=!0,b.preventDefault?b.preventDefault():b.returnValue=!1;var c=b.currentTarget||b.srcElement||this;return"span"===c.nodeName&&(c=c.parentNode),K.title=K.title.trim(),K.text=K.text.trim(),K.text===K.originalText&&K.title===K.originalTitle?(v.test(c.className)||(c.className+=" nochange"),c.childNodes[0].innerHTML="No change",P.tempSaveText&&clearTimeout(P.tempSaveText),P.tempSaveText=setTimeout(function(){c.childNodes[0].innerHTML="Save",c.className=c.className.replace(v,"")},2e3),!1):(j(!0,C),void d({url:"https://kx.afms.mil"+x+"_api/"+z+"/items("+K.id+")",method:"POST",data:JSON.stringify({__metadata:{type:listItemType},Title:K.title,Text:K.text}),type:"json",contentType:"application/json",withCredentials:!0,headers:{"X-HTTP-Method":"MERGE",Accept:"application/json;odata=verbose","text-Type":"application/json;odata=verbose","Content-Type":"application/json;odata=verbose","X-RequestDigest":G,"IF-MATCH":"*"},success:function(){k({title:"## "+K.title+" updated!",text:"**"+K.category.join("/")+"** has been updated with the changes you just made.",type:"success",showCancelButton:!1})},error:function(a){k({title:"## Bummer - Update/Save",text:"Something went wrong.  Check the console (hit F12)",type:"error"})},complete:function(){j(!1,C)}}))}function f(b){b=b||a.event,b.stopPropagation?b.stopPropagation():b.cancelBubble=!0,b.preventDefault?b.preventDefault():b.returnValue=!1;var c=b.currentTarget||b.srcElement||this;"span"===c.nodeName&&(c=c.parentNode),k({title:"## New Page",text:"Give it a name:",type:"new"},function(b){if(b===!0){return!1}j(!0,c);var e=b.rootCategory+"/"+b.title.toCamelCase();d({url:"https://kx.afms.mil"+x+"_api/"+z+"/items",method:"POST",data:JSON.stringify({__metadata:{type:listItemType},Title:b.title,Text:"## New Page :)",Category:e}),type:"json",contentType:"application/json",withCredentials:!0,headers:{Accept:"application/json;odata=verbose","text-Type":"application/json;odata=verbose","Content-Type":"application/json;odata=verbose","X-RequestDigest":G},success:function(){k({title:"## '"+b.title+"' was created",text:"Your page is located at **"+e+"**.  Go fill it in!",type:"success",showCancelButton:!1},function(){a.location.href=w+"#"+e})},error:function(a){k({title:"## Bummer - Create",text:"Something went wrong.  Check the console (hit F12)",type:"error"})},complete:function(){j(!1,c)}})})}function i(c){c=c||a.event;var e=c.currentTarget||c.srcElement||this;K.title=K.title.trim(),k({title:"## DELETE PAGE\n **"+K.title+"**, ID: "+K.id,text:"If you aren't sure, *you might wanna check with someone first.*\nOtherwise, go for it!",type:"warning"},function(c){return c===!1?!1:(j(!0,e),void d({url:"https://kx.afms.mil"+x+"_api/"+z+"/items("+K.id+")",method:"POST",type:"json",contentType:"application/json",withCredentials:!0,headers:{"IF-MATCH":"*","X-HTTP-Method":"DELETE",Accept:"application/json;odata=verbose","text-Type":"application/json;odata=verbose","Content-Type":"application/json;odata=verbose","X-RequestDigest":G},success:function(){k({title:"## Page deleted!",text:"**"+K.title+"** has been deleted.  OK, bye.",type:"success"},function(c){if(c!==!1){var d=b.createElement("a");d.target="_blank",d.href="https://en.wikipedia.org/wiki/Special:Random",B.appendChild(d),d.click()}a.location.href=w})},error:function(a){k({title:"## Bummer - Delete",text:"Something went wrong.  Check the console (hit F12)",type:"error",showCancelButton:!1})},complete:function(){j(!1,e)}}))})}function m(){if(K.animating===!0){return!1}K.animating=!0;var a=t.test(B.className);return O.velocity({opacity:0},{duration:50,complete:function(){B.className=a?B.className.replace(t,""):B.className+" fullPage",O.velocity({opacity:1},{duration:75,complete:function(){K.animating=!1}})}}),!1}function n(){if(K.animating===!0){return!1}K.animating=!0;var a=u.test(C.className);return O.velocity({opacity:0},{duration:50,complete:function(){C.className=a?C.className.replace(u,""):C.className+" cheatSheet",O.velocity({opacity:1},{duration:75,complete:function(){K.animating=!1}})}}),!1}C.innerHTML="",D.innerHTML=H.render("# "+K.originalTitle+"\n"+K.originalText);try{j(!1,D)}catch(o){j(!1,B)}if(CodeMirror){var p,r,s,y,A,E,I,J,L,M=[b.createElement("span"),b.createElement("span"),b.createElement("span"),b.createElement("span"),b.createElement("span")];M[0].appendChild(g("Toggle Editor")),M[1].appendChild(g("Cheat Sheet")),M[2].appendChild(g("Delete")),M[3].appendChild(g("New")),M[4].appendChild(g("Save")),p=b.createElement("input"),p.id="titleField",p.value=K.originalTitle,p.setAttribute("type","text"),p.setAttribute("tab-index","1"),r=b.createElement("div"),r.id="toggler",r.appendChild(M[0]),r.setAttribute("role","button"),r.className="btn",s=b.createElement("div"),s.id="cheatSheetButton",s.appendChild(M[1]),s.setAttribute("role","button"),s.className="btn",y=b.createElement("div"),y.id="deleteButton",y.appendChild(M[2]),y.setAttribute("role","button"),y.className="btn",A=b.createElement("div"),A.id="create",A.appendChild(M[3]),A.setAttribute("role","button"),A.className="btn",E=b.createElement("div"),E.id="save",E.appendChild(M[4]),E.setAttribute("role","button"),E.className="btn",h("keyup",p,c),h("click",r,m),h("click",s,n),h("click",y,i),h("click",A,f),h("click",E,e),F.appendChild(p),F.appendChild(r),F.appendChild(s),F.appendChild(y),F.appendChild(A),F.appendChild(E),P.innerHTML="",P.appendChild(F),J=b.createElement("div"),J.className="cheatSheet",J.appendChild(g("Delightful!")),L=b.createElement("textarea"),L.id="textarea",L.appendChild(g(K.originalText)),I=b.createElement("div"),I.id="input",I.appendChild(J),I.appendChild(L),B.insertBefore(P,C),F.appendChild(J),F.appendChild(I),F.appendChild(D),fastdom.write(function(){C.appendChild(F)}),q||fastdom.write(function(){q=CodeMirror.fromTextArea(L,{mode:"gfm",lineNumbers:!1,matchBrackets:!0,lineWrapping:!0,theme:"mdn-like",extraKeys:{Enter:"newlineAndIndentContinueMarkdownList"}}),q.on("change",l)})}else{fastdom.write(function(){C.appendChild(D)})}}})}function n(){d({url:"https://kx.afms.mil"+x+"_api/"+z+"/items/?$select=Title,Category",method:"GET",type:"json",contentType:"application/json",withCredentials:!0,headers:{Accept:"application/json;odata=verbose","text-Type":"application/json;odata=verbose","Content-Type":"application/json;odata=verbose"},success:function(a){for(var c,d;c=a.d.results.shift();){I[c.Category]=c.Title,d=b.createElement("option"),d.innerHTML=c.Title,d.value=c.Category,J.options.add(d)}},error:function(a){}})}String.prototype.toCamelCase=function(){return this.toLowerCase().replace(/\s(.)/g,function(a){return a.toUpperCase()}).replace(/\s/g,"")};try{var o=b.getElementById("leftnav");o.parentNode.removeChild(o)}catch(p){}var q,r,s=/ ?loading/g,t=/ ?fullPage/g,u=/ ?cheatSheet/g,v=/ ?nochange/g,w="https://kx.afms.mil/kj/kx7/PublicHealth/Pages/contentManagerTest2.aspx",x="/kj/kx7/PublicHealth/",y="Content",z="Content"===y?"lists(guid'4522F7F9-1B5C-4990-9704-991725DEF693')":"lists/getByTitle('"+y+"')",A=b.createElement("div"),B=b.createElement("div"),C=b.createElement("div"),D=b.createElement("div"),E=b.createElement("div"),F=b.createDocumentFragment(),G=b.getElementById("__REQUESTDIGEST").value,H=f({highlight:function(a,b){if(b&&hljs.getLanguage(b)){try{return hljs.highlight(b,a).value}catch(c){}}return""}}),I={},J=b.createElement("select"),K={id:null,originalTitle:"",title:"",originalText:"",text:"",references:[],category:[],listItemType:"",timestamp:null,editor:!1,inTransition:{},animating:!1},L=b.createElement("link"),M=b.createElement("link"),N=b.getElementsByTagName("head")[0],O=c(C),P=b.createElement("div");M.type="text/css",M.rel="stylesheet",M.href=x+"Pages/Dev/editor.min.css",L.type="text/css",L.rel="stylesheet",L.href=x+"SiteAssets/Styles/pageview.min.css",F.appendChild(M),F.appendChild(L),N.appendChild(F),P.id="buttonsWrap",E.className="modalOverlay",C.id="contentWrap",D.id="output",C.appendChild(D),B.className="fullPage",B.id="content",B.appendChild(C),A.id="wrapper",A.appendChild(B);try{r=b.getElementById("wrapper"),r.parentNode.replaceChild(A,r)}catch(p){try{r=b.getElementById("content"),r.style.display="none",r.parentNode.appendChild(A)}catch(Q){b.body.appendChild(A)}}var R=e({"/(\\w+)":{once:n,on:function(a){this.rt=(this.rt||"")+a,j(!0,B),m("/")},after:function(){try{var a=q.getWrapperElement();a.parentNode.removeChild(a),q=null}catch(b){}try{E.parentNode.removeChild(E),E=null}catch(b){}}},"/fhm":{"/(\\w+)":{once:n,on:function(a){this.rt=(this.rt||"")+a,j(!0,D),m("/fhm/"+a)},after:function(){try{var a=q.getWrapperElement();a.parentNode.removeChild(a),q=null}catch(b){}try{E.parentNode.removeChild(E),E=null}catch(b){}}},on:function(a){this.rt=(this.rt||"")+a}},"/comm":{"/(\\w+)":{once:n,on:function(a){j(!0,D),m("/comm/"+a)},after:function(){try{var a=q.getWrapperElement();a.parentNode.removeChild(a),q=null}catch(b){}try{E.parentNode.removeChild(E),E=null}catch(b){}}}}}).configure({run_handler_in_init:!0,strict:!1,recurse:"forward"});R.init()}(window,document,jQuery,reqwest,Router,markdownit);